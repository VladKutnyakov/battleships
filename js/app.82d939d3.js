(function(){"use strict";var e={1105:function(e,t,i){var s=i(9963),o=i(6252);function a(e,t,i,s,a,n){const l=(0,o.up)("default-layout");return(0,o.wg)(),(0,o.j4)(l)}const n={class:"default-layout"},l={class:"default-layout__wrapper"};function r(e,t,i,s,a,r){const h=(0,o.up)("the-header"),d=(0,o.up)("the-footer");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",l,[(0,o.Wm)(h),((0,o.wg)(),(0,o.j4)((0,o.LL)(e.gameStatus),{class:"default-layout__content"})),(0,o.Wm)(d)])])}var h=i(3907),d=i.p+"img/ship.05822b33.svg";const c={class:"header"},p=(0,o._)("div",{class:"header__icon"},[(0,o._)("img",{src:d,alt:""})],-1),m=(0,o._)("div",{class:"header__title"}," Морской бой ",-1),u={key:0,class:"header__new-game-btn"},S=(0,o.Uk)(" Новая игра ");function g(e,t,i,s,a,n){const l=(0,o.up)("app-button");return(0,o.wg)(),(0,o.iD)("div",c,[p,m,"Game"===e.gameStatus?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(l,{onClick:t[0]||(t[0]=e=>n.restartGame())},{default:(0,o.w5)((()=>[S])),_:1})])):(0,o.kq)("",!0)])}const y={class:"btn"};function _(e,t,i,s,a,n){return(0,o.wg)(),(0,o.iD)("button",y,[(0,o.WI)(e.$slots,"default")])}var v={name:"AppButton"},f=i(3744);const x=(0,f.Z)(v,[["render",_]]);var C=x,T={name:"TheHeader",components:{AppButton:C},computed:{...(0,h.rn)({gameStatus:e=>e.gameStatus})},methods:{restartGame(){this.$store.commit("setGameStatus","GamePreparation"),this.$store.commit("setPlayerTurn",!0),this.$store.commit("resetShips"),this.$store.commit("setPlayerShips",[]),this.$store.commit("setAiShips",[]),this.$store.commit("setAiShotCellsIndex",[]),this.$store.commit("setShotTargetDirection",null),this.$store.commit("setShotTargetCell",null),this.$store.commit("setAiUsedDirections",[])}}};const w=(0,f.Z)(T,[["render",g]]);var b=w;const k={class:"footer"},$=(0,o.uE)('<div class="footer__contacts"><div class="contacts__author"> Кутняков Владислав 2023 г. </div><div class="contacts__socials"><a href="https://github.com/VladKutnyakov" target="_blank"><div class="socials__item socials__item-github"></div></a></div></div>',1),P=[$];function D(e,t,i,s,a,n){return(0,o.wg)(),(0,o.iD)("div",k,P)}var I={name:"TheFooter"};const A=(0,f.Z)(I,[["render",D]]);var R=A,M=i(3577);const O={class:"game"},W={class:"game__block game__player-block"},Y={class:"player-block__field"},G={class:"game-block__alive-count"},U=(0,o.Uk)(" Кораблей на поле: "),E={class:"alive-count__number"},X={class:"game__turn"},N={key:0,class:"turn__player-turn"},Z={key:1,class:"turn__ai-turn"},z={class:"game__block game__ai-block"},F={class:"ai-block__field"},j={class:"game-block__alive-count"},B=(0,o.Uk)(" Кораблей на поле: "),L={class:"alive-count__number"};function H(e,t,i,s,a,n){const l=(0,o.up)("player-field"),r=(0,o.up)("a-i-field"),h=(0,o.up)("game-end-modal");return(0,o.wg)(),(0,o.iD)("div",O,[(0,o._)("div",W,[(0,o._)("div",Y,[(0,o.Wm)(l)]),(0,o._)("div",G,[U,(0,o._)("span",E,(0,M.zw)(n.alivePlayerShipsCount),1)])]),(0,o._)("div",X,[e.playerTurn?((0,o.wg)(),(0,o.iD)("div",N," Ваш ход ")):((0,o.wg)(),(0,o.iD)("div",Z," Ход врага ")),(0,o._)("div",{class:(0,M.C_)(["turn__icon",[{"turn__icon-right":e.playerTurn},{"turn__icon-left":!e.playerTurn}]])},null,2)]),(0,o._)("div",z,[(0,o._)("div",F,[(0,o.Wm)(r)]),(0,o._)("div",j,[B,(0,o._)("span",L,(0,M.zw)(n.aliveAiShipsCount),1)])]),(0,o.Wm)(h,{modalActive:e.gameEndModalActive,playerWon:a.playerWon},null,8,["modalActive","playerWon"])])}const q={class:"player-field"};function K(e,t,i,s,a,n){const l=(0,o.up)("field");return(0,o.wg)(),(0,o.iD)("div",q,[(0,o.Wm)(l,{dataName:"player",placedShips:e.playerShips,showShips:!0,randomShips:e.playerShipsRandomPlacement,onPlaceShip:t[0]||(t[0]=t=>e.$store.commit("addPlayerShip",t)),onStopRandom:t[1]||(t[1]=t=>e.$store.commit("setPlayerShipsRandomPlacement",!1)),onShotShipOnCell:t[2]||(t[2]=e=>n.shotShip(e))},null,8,["placedShips","randomShips"])])}const V={class:"field"},J={class:"field__field-grid"},Q={class:"field-grid__letters"},ee={class:"field-grid__numbers"},te={class:"field-grid__cells"};function ie(e,t,i,s,a,n){const l=(0,o.up)("cell");return(0,o.wg)(),(0,o.iD)("div",V,[(0,o._)("div",J,[(0,o._)("div",Q,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.letters,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"letters__item",key:t},(0,M.zw)(e),1)))),128))]),(0,o._)("div",ee,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(10,(e=>(0,o._)("div",{class:"numbers__item",key:e},(0,M.zw)(e),1))),64))]),(0,o._)("div",te,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(100,(s=>(0,o.Wm)(l,{ref_for:!0,ref:"cells",class:"field-grid__cell",key:`${i.dataName}-${s}`,index:s,showShips:i.showShips,placedShips:i.placedShips,dataName:i.dataName,randomShips:i.randomShips&&n.checkRandomCell(s),onPlaceShip:t[0]||(t[0]=t=>e.$emit("placeShip",t)),onStopRandom:t[1]||(t[1]=t=>e.$emit("stopRandom")),onShotShipOnCell:t[2]||(t[2]=t=>e.$emit("shotShipOnCell",t))},null,8,["index","showShips","placedShips","dataName","randomShips"]))),64))])])])}function se(e,t,i,a,n,l){const r=(0,o.up)("ship-part");return(0,o.wg)(),(0,o.iD)("div",{ref:"cell",class:"cell",onClick:t[0]||(t[0]=e=>l.clickOnCell()),onContextmenu:t[1]||(t[1]=(0,s.iM)((e=>l.removeShip()),["prevent"]))},[(0,o._)("div",{class:(0,M.C_)(["cell__status",0===l.shipPartOnCell?.health?"cell__status_dead":`cell__status_${n.status}`])},null,2),l.shipPartOnCell&&i.showShips?((0,o.wg)(),(0,o.j4)(r,{key:0})):(0,o.kq)("",!0)],544)}i(7658);const oe=["data-ship-length"];function ae(e,t,i,s,a,n){return(0,o.wg)(),(0,o.iD)("div",{class:(0,M.C_)(["ship",`ship__orientation-${i.orientation}`]),"data-ship-length":i.length},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.length,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"ship__ship-part",key:e})))),128))],10,oe)}var ne={name:"Ship",props:{length:Number,orientation:String}};const le=(0,f.Z)(ne,[["render",ae]]);var re=le;const he={class:"ship-part"};function de(e,t,i,s,a,n){return(0,o.wg)(),(0,o.iD)("div",he)}var ce={name:"ShipPart"};const pe=(0,f.Z)(ce,[["render",de]]);var me=pe,ue={name:"Cell",components:{Ship:re,ShipPart:me},props:{index:Number,showShips:Boolean,placedShips:Array,randomShips:Boolean,dataName:String},data(){return{status:"initial"}},computed:{...(0,h.rn)({ships:e=>e.ships,selectedShip:e=>e.selectedShip,gameStatus:e=>e.gameStatus,playerTurn:e=>e.playerTurn,shotTargetCell:e=>e.shotTargetCell}),coordX(){return this.index%10!==0?this.index%10:10},coordY(){return Math.ceil(this.index/10)},shipOnCell(){return this.placedShips.find((e=>e?.coordinates[0].x===this.coordX&&e?.coordinates[0].y===this.coordY))},shipPartOnCell(){return this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX&&e.y===this.coordY))))},deadShipNearby(){return this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX&&e.y===this.coordY+1))&&0===e.health))||this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX+1&&e.y===this.coordY))&&0===e.health))||this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX+1&&e.y===this.coordY+1))&&0===e.health))||this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX&&e.y===this.coordY-1))&&0===e.health))||this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX-1&&e.y===this.coordY))&&0===e.health))||this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX-1&&e.y===this.coordY-1))&&0===e.health))||this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX&&e.y===this.coordY-1))&&0===e.health))||this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX-1&&e.y===this.coordY+1))&&0===e.health))||this.placedShips.find((e=>e.coordinates.find((e=>e.x===this.coordX+1&&e.y===this.coordY-1))&&0===e.health))}},watch:{randomShips(e){e&&this.placedShips.length<10?(this.selectShip(),this.placeShip()):(this.$store.commit("setSelectedShip",null),this.$store.commit("setRandomCellsIndex",[]),this.$emit("stopRandom"))},deadShipNearby(e){e&&(this.status="empty")},shotTargetCell(e){e&&"player"===this.dataName&&this.shotTargetCell.index===this.index&&this.shot()}},methods:{clickOnCell(){"GamePreparation"===this.gameStatus?this.placeShip():"Game"===this.gameStatus&&"ai"===this.dataName&&this.playerTurn&&"initial"===this.status&&this.shot()},placeShip(){if(this.selectedShip?.count>0&&("horizontal"===this.selectedShip?.orientation&&this.coordX+this.selectedShip?.length-1<=10||"vertical"===this.selectedShip?.orientation&&this.coordY+this.selectedShip?.length-1<=10)&&!this.checkShipsNearby(this.placedShips,this.selectedShip)){let e=[];for(let t=0;t<this.selectedShip.length;t++)"horizontal"===this.selectedShip.orientation?e.push({x:this.coordX+t,y:this.coordY}):"vertical"===this.selectedShip.orientation&&e.push({x:this.coordX,y:this.coordY+t});this.$emit("placeShip",{coordinates:e,length:this.selectedShip.length,orientation:this.selectedShip.orientation,health:this.selectedShip.length}),this.$store.commit("decrementShipsCount",this.selectedShip.length)}},checkShipsNearby(e,t){let i=null;const s=1;let o=this.coordX-s,a=null,n=this.coordY-s,l=null;return"horizontal"===t.orientation&&(a=this.coordX+t.length,l=this.coordY+s),"vertical"===t.orientation&&(a=this.coordX+s,l=this.coordY+t.length),e.forEach((e=>{if("horizontal"===e.orientation&&e.coordinates[0].y>=n&&e.coordinates[0].y<=l){if(e.coordinates[0].x>=o&&e.coordinates[0].x<=a||e.coordinates[0].x<=o&&e.coordinates[0].x+e.length-1>=o)return i=e}else if("vertical"===e.orientation&&e.coordinates[0].x>=o&&e.coordinates[0].x<=a&&(e.coordinates[0].y>=n&&e.coordinates[0].y<=l||e.coordinates[0].y<=n&&e.coordinates[0].y+e.length-1>=n))return i=e})),i},removeShip(){"GamePreparation"===this.gameStatus&&this.placedShips.forEach((e=>{e.coordinates.forEach((t=>{if(t.x===this.coordX&&t.y===this.coordY){const t=e.length;this.$store.commit("removePlayerShip",e),this.$store.commit("incrementShipsCount",t)}}))}))},selectShip(){let e=3;while(0===this.ships[e]?.count)e--;const t=0===Math.floor(2*Math.random())?"horizontal":"vertical",i={...this.ships[e],orientation:t};this.$store.commit("setSelectedShip",i)},shot(){let e=this.shipPartOnCell;e?e.health>0&&"dead"!==this.status&&"hit"!==this.status&&(e.health--,e.health>0?this.status="hit":this.status="dead",this.$emit("shotShipOnCell",{x:this.coordX,y:this.coordY,index:this.index,status:this.status})):(this.status="empty",this.$store.commit("togglePlayerTurn"))}}};const Se=(0,f.Z)(ue,[["render",se]]);var ge=Se,ye={name:"Field",components:{Cell:ge},emits:["placeShip","stopRandom","shotShipOnCell"],props:{dataName:String,placedShips:Array,showShips:Boolean,randomShips:Boolean},data(){return{letters:["А","Б","В","Г","Д","Е","Ж","З","И","К"]}},computed:{...(0,h.rn)({randomCellsIndex:e=>e.randomCellsIndex,playerTurn:e=>e.playerTurn})},watch:{randomShips(e){e&&this.placeShipsRandom()}},methods:{checkRandomCell(e){return this.randomCellsIndex.includes(e)},getRandomCellIndex(){let e=null;while(this.checkRandomCell(e)&&100!==this.randomCellsIndex.length&&100!==this.randomCellsIndex.length)e=Math.floor(100*Math.random()+1);return this.$store.commit("addRandomCellsIndex",e),e},placeShipsRandom(){setTimeout((()=>{this.getRandomCellIndex(),this.randomShips&&this.placedShips.length<10&&this.placeShipsRandom()}),0)}}};const _e=(0,f.Z)(ye,[["render",ie]]);var ve=_e,fe={name:"PlayerField",components:{Field:ve},computed:{...(0,h.rn)({playerShips:e=>e.playerShips,playerShipsRandomPlacement:e=>e.playerShipsRandomPlacement,playerTurn:e=>e.playerTurn,aiShotCellsIndex:e=>e.aiShotCellsIndex,aiUsedDirections:e=>e.aiUsedDirections,shotTargetDirection:e=>e.shotTargetDirection,shotTargetCell:e=>e.shotTargetCell,shotTargetShipIndex:e=>e.shotTargetShipIndex}),alivePlayerShipsCount(){return this.playerShips.filter((e=>e.health>0)).length}},watch:{playerTurn(e){if(!e){let e=this.shotTargetCell;e&&("hit"===e.status||this.shotTargetShipIndex[0])?(this.$store.commit("setShotTargetCell",{x:this.shotTargetShipIndex[0]%10!==0?this.shotTargetShipIndex[0]%10:10,y:Math.ceil(this.shotTargetShipIndex[0]/10),index:this.shotTargetShipIndex[0],status:e.status}),e=this.shotTargetCell,e.direction=this.changeDirection(e),e=this.getCellToShot(e)):e=this.getRandomCellToShot(),this.makeShot({index:e.index,status:null})}}},methods:{shotShip(e){if(!this.playerTurn&&this.alivePlayerShipsCount>0){let t=e;"dead"===e.status&&(this.$store.commit("addShotTargetShipIndex",t.index),this.addDeadShipIndex(),this.$store.commit("setShotTargetShipIndex",[]),this.$store.commit("setAiUsedDirections",[])),"hit"===e.status&&this.shotTargetDirection?(this.$store.commit("addShotTargetShipIndex",t.index),t.direction=this.shotTargetDirection,t=this.getCellToShot(t)):"hit"!==e.status||this.shotTargetDirection?(t=this.getRandomCellToShot(),this.$store.commit("setShotTargetDirection",null)):(this.$store.commit("addShotTargetShipIndex",t.index),t.direction=this.changeDirection(),this.$store.commit("addAiUsedDirections",t.direction),t=this.getCellToShot(t)),this.makeShot({x:t.x,y:t.y,index:t.index,status:e.status||null})}},makeShot(e){setTimeout((()=>{this.$store.commit("addAiShotCellsIndex",e.index),this.$store.commit("setShotTargetCell",e)}),500)},getRandomCellToShot(){let e=Math.floor(100*Math.random()+1);while(this.aiShotCellsIndex.includes(e))e=Math.floor(100*Math.random()+1);this.$store.commit("setShotTargetDirection",null);const t={index:e};return t},getCellToShot(e){const t=1;let i=e;while(this.isOutsideOfField(i,i.direction)||this.isAlreadyShot(i))i.direction=this.changeDirection(i);switch(i.direction){case"right":i.x+=t;break;case"left":i.x-=t;break;case"up":i.y-=t;break;case"down":i.y+=t;break}return i.index=10*i.y+i.x-10,i},changeDirection(e){let t=this.shotTargetDirection;if(t&&"hit"===e.status&&this.aiUsedDirections.length<2){switch(t){case"right":t="left";break;case"left":t="right";break;case"up":t="down";break;case"down":t="up";break}this.$store.commit("addAiUsedDirections",t)}else{const e=Math.floor(4*Math.random()+1);switch(e){case 1:t="right";break;case 2:t="left";break;case 3:t="up";break;case 4:t="down";break}}return this.$store.commit("setShotTargetDirection",t),t},isOutsideOfField(e,t){const i=1,s=e;return"right"===t&&s.x+i>10||"left"===t&&s.x-i<1||"up"===t&&s.y-i<1||"down"===t&&s.y+i>10},isAlreadyShot(e){const t=1;switch(e.direction){case"right":return this.aiShotCellsIndex.includes(e.index+t);case"left":return this.aiShotCellsIndex.includes(e.index-t);case"up":return this.aiShotCellsIndex.includes(e.index-10*t);case"down":return this.aiShotCellsIndex.includes(e.index+10*t)}},addDeadShipIndex(){let e=Math.min(...this.shotTargetShipIndex),t=Math.max(...this.shotTargetShipIndex);e>10&&(e-=10),e%10!==1&&(e-=1),t<91&&(t+=10),t%10!==0&&(t+=1);let i=e;while(i<=t)this.aiShotCellsIndex.includes(i)||this.$store.commit("addAiShotCellsIndex",i),i%10===t%10?i+=10-((t%10!==0?t%10:10)-(e%10!==0?e%10:10)):i++}}};const xe=(0,f.Z)(fe,[["render",K]]);var Ce=xe;const Te={class:"ai-field"};function we(e,t,i,s,a,n){const l=(0,o.up)("field");return(0,o.wg)(),(0,o.iD)("div",Te,[(0,o.Wm)(l,{dataName:"ai",placedShips:e.aiShips,randomShips:e.aiShipsRandomPlacement,onPlaceShip:t[0]||(t[0]=t=>e.$store.commit("addAiShip",t)),onStopRandom:t[1]||(t[1]=t=>e.$store.commit("setAiShipsRandomPlacement",!1))},null,8,["placedShips","randomShips"])])}var be={name:"AIField",components:{Field:ve},computed:{...(0,h.rn)({aiShips:e=>e.aiShips,aiShipsRandomPlacement:e=>e.aiShipsRandomPlacement,playerTurn:e=>e.playerTurn})},mounted(){this.$store.commit("resetShips"),this.$store.commit("setAiShips",[]),this.$store.commit("setAiShipsRandomPlacement",!0)}};const ke=(0,f.Z)(be,[["render",we]]);var $e=ke,Pe=i.p+"img/jolly-roger-happy.b4328241.jpg",De=i.p+"img/jolly-roger-sad.3ce7877f.jpg";const Ie={class:"game-end-modal__content"},Ae={class:"game-end-modal__text"},Re={class:"game-end-modal__image"},Me={key:0,src:Pe},Oe={key:1,src:De};function We(e,t,i,s,a,n){const l=(0,o.up)("app-modal");return(0,o.wg)(),(0,o.j4)(l,{active:i.modalActive,onSubmit:t[0]||(t[0]=e=>n.restartGame()),onClose:t[1]||(t[1]=e=>n.close())},{default:(0,o.w5)((()=>[(0,o._)("div",Ie,[(0,o._)("div",Ae,(0,M.zw)(a.text),1),(0,o._)("div",Re,[i.playerWon?((0,o.wg)(),(0,o.iD)("img",Me)):((0,o.wg)(),(0,o.iD)("img",Oe))])])])),_:1},8,["active"])}const Ye={class:"modal__content-wrapper"},Ge=(0,o._)("div",{class:"modal__header"}," Конец игры ",-1),Ue={class:"modal__content"},Ee=(0,o.Uk)(" Игра окончена "),Xe={class:"modal__footer"},Ne={class:"footer__btn-group"},Ze=(0,o.Uk)(" Новая игра "),ze=(0,o.Uk)(" Закрыть ");function Fe(e,t,i,a,n,l){const r=(0,o.up)("app-button");return i.active?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"modal__wrapper",tabindex:"0",onClick:t[2]||(t[2]=(0,s.iM)((e=>l.close()),["self"]))},[(0,o._)("div",Ye,[Ge,(0,o._)("div",Ue,[(0,o.WI)(e.$slots,"default",{},(()=>[Ee]))]),(0,o._)("div",Xe,[(0,o._)("div",Ne,[(0,o.Wm)(r,{onClick:t[0]||(t[0]=e=>l.sumbit())},{default:(0,o.w5)((()=>[Ze])),_:1}),(0,o.Wm)(r,{onClick:t[1]||(t[1]=e=>l.close())},{default:(0,o.w5)((()=>[ze])),_:1})])])])])):(0,o.kq)("",!0)}var je={name:"AppModal",components:{AppButton:C},props:{active:Boolean},watch:{active(e){e?(document.querySelector("body").style.overflowY="hidden",document.addEventListener("keydown",this.onEscape)):(document.querySelector("body").style.overflowY="auto",document.removeEventListener("keydown",this.onEscape))}},methods:{sumbit(){this.$emit("submit")},close(){this.$emit("close")},onEscape(e){27===e.keyCode&&this.close()}}};const Be=(0,f.Z)(je,[["render",Fe]]);var Le=Be,He={name:"GameEndModal",props:{modalActive:Boolean,playerWon:Boolean},data(){return{text:"Поражение... Искуственный интелект оказался сильнее"}},components:{AppModal:Le},watch:{playerWon(e){this.text=e?"Победа! Корабли врага потоплены":"Поражение... Искуственный интелект оказался сильнее"}},methods:{restartGame(){this.$store.commit("setGameStatus","GamePreparation"),this.$store.commit("setPlayerTurn",!0),this.$store.commit("resetShips"),this.$store.commit("setPlayerShips",[]),this.$store.commit("setAiShips",[]),this.$store.commit("setAiShotCellsIndex",[]),this.$store.commit("setShotTargetDirection",null),this.$store.commit("setShotTargetCell",null),this.$store.commit("setAiUsedDirections",[]),this.$store.commit("toggleModalVisibility","gameEndModalActive")},close(){this.$store.commit("toggleModalVisibility","gameEndModalActive")}}};const qe=(0,f.Z)(He,[["render",We]]);var Ke=qe,Ve={name:"Game",components:{PlayerField:Ce,AIField:$e,GameEndModal:Ke},data(){return{playerWon:!1}},computed:{...(0,h.rn)({playerShips:e=>e.playerShips,aiShips:e=>e.aiShips,playerTurn:e=>e.playerTurn,gameEndModalActive:e=>e.gameEndModalActive}),aliveAiShipsCount(){return this.aiShips.filter((e=>e.health>0)).length},alivePlayerShipsCount(){return this.playerShips.filter((e=>e.health>0)).length}},watch:{aliveAiShipsCount(e){0===e&&(this.playerWon=!0,setTimeout((()=>{this.$store.commit("toggleModalVisibility","gameEndModalActive")}),1e3))},alivePlayerShipsCount(e){0===e&&(this.playerWon=!1,setTimeout((()=>{this.$store.commit("toggleModalVisibility","gameEndModalActive")}),1e3))}}};const Je=(0,f.Z)(Ve,[["render",H]]);var Qe=Je;const et={class:"game-preparation"},tt=(0,o._)("div",{class:"game-preparation__heading"}," Подготовка ",-1),it=(0,o._)("div",{class:"game-preparation__text"},[(0,o.Uk)(" Выберите нужный корабль из арсенала, кликнув по нему. Затем кликните по клетке поля, чтобы поставить выбранный корабль. "),(0,o._)("br"),(0,o.Uk)(" Для удаления корябля с поля кликните по нему правой кнопкой мыши. ")],-1),st={class:"game-preparation__redactor"},ot={class:"game-preparation__buttons"},at=(0,o.Uk)(" Случайно "),nt=(0,o.Uk)(" В бой! ");function lt(e,t,i,s,a,n){const l=(0,o.up)("player-field"),r=(0,o.up)("ships-list"),h=(0,o.up)("app-button");return(0,o.wg)(),(0,o.iD)("div",et,[tt,it,(0,o._)("div",st,[(0,o.Wm)(l),(0,o.Wm)(r)]),(0,o._)("div",ot,[(0,o.Wm)(h,{disabled:e.playerShipsRandomPlacement,onClick:t[0]||(t[0]=e=>n.randomShips())},{default:(0,o.w5)((()=>[at])),_:1},8,["disabled"]),(0,o.Wm)(h,{disabled:!n.isFieldReady,onClick:t[1]||(t[1]=e=>n.startGame())},{default:(0,o.w5)((()=>[nt])),_:1},8,["disabled"])])])}var rt=i.p+"img/arrow-flip.e387c0d3.svg";const ht={class:"ships-list"},dt=(0,o._)("div",{class:"ships-list__heading"}," Арсенал ",-1),ct={class:"item__count"},pt={class:"item__ship"},mt={key:0,class:"ships-list__selected-ship"},ut=(0,o._)("div",{class:"selected-ship__heading"}," Выбранный корабль ",-1),St={class:"selected-ship__ship-item"},gt=(0,o._)("img",{src:rt},null,-1),yt=[gt];function _t(e,t,i,s,a,n){const l=(0,o.up)("ship");return(0,o.wg)(),(0,o.iD)("div",ht,[dt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.ships,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"ship-list__item",key:t},[(0,o._)("div",ct,(0,M.zw)(e.count),1),(0,o._)("div",pt,[(0,o.Wm)(l,{class:(0,M.C_)({ship_disabled:e.count<=0}),length:e.length,orientation:"horizontal",onClick:t=>n.chooseShip(e)},null,8,["class","length","onClick"])])])))),128)),e.selectedShip&&!e.playerShipsRandomPlacement?((0,o.wg)(),(0,o.iD)("div",mt,[ut,(0,o._)("div",St,[(0,o.Wm)(l,{length:e.selectedShip.length,orientation:e.selectedShip.orientation},null,8,["length","orientation"]),(0,o._)("div",{class:"ship-item__icon",onClick:t[0]||(t[0]=e=>n.flipChoosenShip())},yt)])])):(0,o.kq)("",!0)])}var vt={name:"ShipList",components:{Ship:re},computed:{...(0,h.rn)({ships:e=>e.ships,selectedShip:e=>e.selectedShip,playerShipsRandomPlacement:e=>e.playerShipsRandomPlacement})},methods:{chooseShip(e){e.orientation="horizontal",this.$store.commit("setSelectedShip",e)},flipChoosenShip(){let e=this.selectedShip;"horizontal"===e.orientation?e.orientation="vertical":"vertical"===e.orientation&&(e.orientation="horizontal"),this.$store.commit("setSelectedShip",e)}}};const ft=(0,f.Z)(vt,[["render",_t]]);var xt=ft,Ct={name:"GamePreparation",components:{PlayerField:Ce,ShipsList:xt,AppButton:C},computed:{...(0,h.rn)({playerShips:e=>e.playerShips,playerShipsRandomPlacement:e=>e.playerShipsRandomPlacement}),isFieldReady(){return 10===this.playerShips.length}},methods:{randomShips(){this.$store.commit("resetShips"),this.$store.commit("setPlayerShips",[]),this.$store.commit("setPlayerShipsRandomPlacement",!0)},startGame(){this.$store.commit("setGameStatus","Game")}}};const Tt=(0,f.Z)(Ct,[["render",lt]]);var wt=Tt,bt={name:"DefaultLayout",components:{TheHeader:b,TheFooter:R,Game:Qe,GamePreparation:wt},computed:{...(0,h.rn)({gameStatus:e=>e.gameStatus})}};const kt=(0,f.Z)(bt,[["render",r]]);var $t=kt,Pt={name:"App",components:{DefaultLayout:$t}};const Dt=(0,f.Z)(Pt,[["render",a]]);var It=Dt,At=(0,h.MT)({state:{ships:[{length:1,count:4},{length:2,count:3},{length:3,count:2},{length:4,count:1}],playerShips:[],aiShips:[],selectedShip:null,playerShipsRandomPlacement:!1,aiShipsRandomPlacement:!1,randomCellsIndex:[],aiShotCellsIndex:[],aiUsedDirections:[],shotTargetCell:null,shotTargetDirection:null,shotTargetShipIndex:[],playerTurn:!0,gameStatus:"GamePreparation",gameEndModalActive:!1},getters:{},mutations:{addPlayerShip(e,t){e.playerShips.push(t)},setPlayerShips(e,t){e.playerShips=t},addAiShip(e,t){e.aiShips.push(t)},setAiShips(e,t){e.aiShips=t},removePlayerShip(e,t){const i=e.playerShips.indexOf(t);-1!==i&&e.playerShips.splice(i,1)},setSelectedShip(e,t){e.selectedShip=t},resetShips(e){e.ships=[{length:1,count:4},{length:2,count:3},{length:3,count:2},{length:4,count:1}]},incrementShipsCount(e,t){const i=e.ships.findIndex((e=>e.length===t));e.ships[i].count++},decrementShipsCount(e,t){const i=e.ships.findIndex((e=>e.length===t));e.ships[i].count--},addRandomCellsIndex(e,t){e.randomCellsIndex.push(t)},setRandomCellsIndex(e,t){e.randomCellsIndex=t},setPlayerShipsRandomPlacement(e,t){e.playerShipsRandomPlacement=t},setAiShipsRandomPlacement(e,t){e.aiShipsRandomPlacement=t},editPlayerShip(e,t){const i=e.playerShips.findIndex((e=>e.coordinates===t.coordinates));e.playerShips[i]=t},editAiShip(e,t){const i=e.aiShips.findIndex((e=>e.coordinates===t.coordinates));e.aiShips[i]=t},togglePlayerTurn(e){e.playerTurn=!e.playerTurn},setPlayerTurn(e,t){e.playerTurn=t},setGameStatus(e,t){e.gameStatus=t},addAiShotCellsIndex(e,t){e.aiShotCellsIndex.push(t)},setAiShotCellsIndex(e,t){e.aiShotCellsIndex=t},addAiUsedDirections(e,t){e.aiUsedDirections.push(t)},setAiUsedDirections(e,t){e.aiUsedDirections=t},setShotTargetCell(e,t){e.shotTargetCell=t},setShotTargetDirection(e,t){e.shotTargetDirection=t},setShotTargetShipIndex(e,t){e.shotTargetShipIndex=t},addShotTargetShipIndex(e,t){e.shotTargetShipIndex.push(t)},toggleModalVisibility(e,t){e[t]=!e[t]}},actions:{},modules:{}});(0,s.ri)(It).use(At).mount("#app")}},t={};function i(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}i.m=e,function(){var e=[];i.O=function(t,s,o,a){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],a=e[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&a||n>=a)&&Object.keys(i.O).every((function(e){return i.O[e](s[r])}))?s.splice(r--,1):(l=!1,a<n&&(n=a));if(l){e.splice(d--,1);var h=o();void 0!==h&&(t=h)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,o,a]}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/battleships/"}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,a,n=s[0],l=s[1],r=s[2],h=0;if(n.some((function(t){return 0!==e[t]}))){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(r)var d=r(i)}for(t&&t(s);h<n.length;h++)a=n[h],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},s=self["webpackChunkbattleships"]=self["webpackChunkbattleships"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(1105)}));s=i.O(s)})();
//# sourceMappingURL=app.82d939d3.js.map